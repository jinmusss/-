<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JINMU PRO ULTIMATE - 目标矩阵</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="selection:bg-purple-600 selection:text-black">

    <!-- 全局加载遮罩 -->
    <div id="global-loader">
        <div class="loader-spinner"></div>
        <p class="mt-4 text-purple-500 font-black text-xs tracking-[0.3em] animate-pulse">SYSTEM INITIALIZING...</p>
    </div>

    <!-- Auth View -->
    <div id="auth-view" class="min-h-screen flex items-center justify-center p-4 hidden-view">
        <div class="w-full max-w-md p-10 rounded-3xl component-bg shadow-2xl border-t-8 border-purple-500">
            <div class="text-center mb-10">
                <i class="fas fa-bolt text-6xl text-purple-400 mb-6 drop-shadow-[0_0_15px_rgba(192,132,252,0.5)]"></i>
                <h1 class="text-3xl font-black tracking-tighter text-white">JINMU <span class="text-purple-400">TRADE</span></h1>
                <p class="text-gray-400 text-sm mt-3 font-bold uppercase tracking-widest">Quantum Performance System</p>
            </div>
            <form id="auth-form" class="space-y-6">
                <input type="email" id="auth-email" required class="w-full p-5 rounded-2xl input-dark" placeholder="邮箱账号">
                <input type="password" id="auth-password" required class="w-full p-5 rounded-2xl input-dark" placeholder="密码">
                <button type="submit" class="cyber-button w-full py-5 rounded-2xl font-black uppercase tracking-widest text-lg">进入</button>
                <button type="button" id="btn-register" class="w-full text-gray-500 text-xs hover:text-purple-400 transition-colors">注册</button>
            </form>
        </div>
    </div>

    <!-- Main View -->
    <div id="main-view" class="hidden-view p-4 md:p-8 max-w-[1700px] mx-auto w-full">
        <header class="mb-8 flex justify-between items-center bg-[#111122]/80 backdrop-blur-md p-6 rounded-3xl border border-white/10 shadow-xl">
            <div class="flex items-center space-x-5">
                <div class="w-12 h-12 bg-purple-500/10 rounded-xl flex items-center justify-center border border-purple-500/30 animate-pulse">
                    <i class="fas fa-layer-group text-2xl text-purple-400"></i>
                </div>
                <div>
                    <h1 class="text-2xl font-black tracking-wider text-white leading-none">JINMU <span class="text-purple-400">TRADE</span></h1>
                    <p class="text-[10px] text-gray-400 uppercase font-black tracking-[0.2em] mt-2">Professional Quantitative Hub</p>
                </div>
            </div>
            <div class="flex items-center space-x-6">
                <div class="flex flex-col items-end">
                    <span id="user-display-name" class="text-sm font-black text-white tracking-tight">OPERATOR</span>
                    <span class="flex items-center text-[10px] text-emerald-500 uppercase font-black tracking-tighter">
                        <span class="w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5 animate-ping"></span> online
                    </span>
                </div>
                <div class="h-10 w-[1px] bg-white/10"></div>
                <button id="btn-logout" class="w-10 h-10 rounded-xl bg-rose-500/10 text-rose-500 hover:bg-rose-500 hover:text-white transition-all duration-300 flex items-center justify-center group">
                    <i class="fas fa-power-off group-hover:rotate-90 transition-transform"></i>
                </button>
            </div>
        </header>

        <main class="space-y-8">
            <!-- 整合：实时行情监控 -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- BTC 卡片 -->
                <div id="btcusdt" class="component-bg rounded-2xl p-6 shadow-2xl transition-all duration-300 hover:scale-[1.02] border-t-2 border-transparent hover:border-t-[#F7931A]">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-gray-400 text-xs font-bold uppercase tracking-widest">Bitcoin</h3>
                            <span class="text-xl font-black">BTC / USDT</span>
                        </div>
                        <i class="fa-brands fa-bitcoin text-[#F7931A] crypto-icon"></i>
                    </div>
                    <div id="btc-price" class="text-3xl font-black tracking-tighter mb-2 font-mono">0.00</div>
                    <div class="flex items-center gap-2">
                        <span id="btc-change" class="text-sm font-bold px-2 py-1 rounded bg-white/5 font-mono">--%</span>
                        <span class="text-gray-500 text-xs uppercase">24h Change</span>
                    </div>
                </div>

                <!-- ETH 卡片 -->
                <div id="ethusdt" class="component-bg rounded-2xl p-6 shadow-2xl transition-all duration-300 hover:scale-[1.02] border-t-2 border-transparent hover:border-t-[#627EEA]">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-gray-400 text-xs font-bold uppercase tracking-widest">Ethereum</h3>
                            <span class="text-xl font-black">ETH / USDT</span>
                        </div>
                        <i class="fa-brands fa-ethereum text-[#627EEA] crypto-icon"></i>
                    </div>
                    <div id="eth-price" class="text-3xl font-black tracking-tighter mb-2 font-mono">0.00</div>
                    <div class="flex items-center gap-2">
                        <span id="eth-change" class="text-sm font-bold px-2 py-1 rounded bg-white/5 font-mono">--%</span>
                        <span class="text-gray-500 text-xs uppercase">24h Change</span>
                    </div>
                </div>

                <!-- DOGE 卡片 -->
                <div id="dogeusdt" class="component-bg rounded-2xl p-6 shadow-2xl transition-all duration-300 hover:scale-[1.02] border-t-2 border-transparent hover:border-t-[#C2A633]">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-gray-400 text-xs font-bold uppercase tracking-widest">Dogecoin</h3>
                            <span class="text-xl font-black">DOGE / USDT</span>
                        </div>
                        <i class="fa-solid fa-paw text-[#C2A633] crypto-icon"></i>
                    </div>
                    <div id="doge-price" class="text-3xl font-black tracking-tighter mb-2 font-mono">0.00</div>
                    <div class="flex items-center gap-2">
                        <span id="doge-change" class="text-sm font-bold px-2 py-1 rounded bg-white/5 font-mono">--%</span>
                        <span class="text-gray-500 text-xs uppercase">24h Change</span>
                    </div>
                </div>
            </div>

            <!-- 顶层：目标进度与设置 + 专业指标 -->
            <div class="grid grid-cols-1 xl:grid-cols-12 gap-8">
                <div class="xl:col-span-5 p-8 rounded-3xl component-bg border border-purple-500/20 relative overflow-hidden shadow-2xl">
                    <div class="absolute -right-10 -top-10 w-40 h-40 bg-purple-500/5 blur-3xl rounded-full"></div>
                    <div class="flex items-center justify-between mb-8">
                        <span class="text-xs text-purple-400 font-black uppercase tracking-[0.25em]">Account Growth Tracker</span>
                        <i class="fas fa-radar text-gray-700"></i>
                    </div>
                    
                    <div class="flex flex-col md:flex-row items-center gap-10">
                        <div class="relative flex items-center justify-center shrink-0 group">
                            <div class="absolute inset-0 bg-purple-500/10 blur-2xl rounded-full scale-0 group-hover:scale-110 transition-transform duration-700"></div>
                            <svg class="progress-ring relative" width="140" height="140">
                                <circle class="text-white/5" stroke-width="10" stroke="currentColor" fill="transparent" r="62" cx="70" cy="70"/>
                                <circle id="goal-progress-bar" class="text-purple-400 progress-ring__circle" stroke-width="10" stroke-dasharray="389.5" stroke-dashoffset="389.5" stroke-linecap="round" stroke="currentColor" fill="transparent" r="62" cx="70" cy="70"/>
                            </svg>
                            <div class="absolute inset-0 flex flex-col items-center justify-center">
                                <span id="goal-percent" class="text-3xl font-black text-white tracking-tighter font-mono">0%</span>
                            </div>
                        </div>

                        <div class="flex-grow w-full space-y-6">
                            <div class="grid grid-cols-2 gap-6">
                                <div class="space-y-2">
                                    <label class="text-[11px] text-gray-400 uppercase font-black tracking-widest">初始资金 (Base)</label>
                                    <div class="flex items-center bg-black/40 px-4 py-3 rounded-xl border border-white/5 focus-within:border-purple-500/50 transition-all">
                                        <span class="text-purple-500 font-black mr-2">$</span>
                                        <input type="number" id="initial-capital" class="bg-transparent border-none p-0 text-white font-black text-base w-full focus:ring-0 font-mono" value="10000">
                                    </div>
                                </div>
                                <div class="space-y-2">
                                    <label class="text-[11px] text-gray-400 uppercase font-black tracking-widest">目标资金 (Target)</label>
                                    <div class="flex items-center bg-black/40 px-4 py-3 rounded-xl border border-white/5 focus-within:border-purple-500/50 transition-all">
                                        <span class="text-purple-500 font-black mr-2">$</span>
                                        <input type="number" id="target-capital" class="bg-transparent border-none p-0 text-white font-black text-base w-full focus:ring-0 font-mono" value="20000">
                                    </div>
                                </div>
                            </div>
                            <div class="pt-4 border-t border-white/5">
                                <p id="remaining-label" class="text-xs text-gray-400 italic font-medium tracking-tight">AI 正在解析目标路径...</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="xl:col-span-7 grid grid-cols-2 md:grid-cols-4 gap-5" id="metrics-grid"></div>
            </div>

            <!-- 中间：日历与曲线 -->
            <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <div class="lg:col-span-4 xl:col-span-3 p-8 rounded-3xl component-bg border border-white/10 shadow-xl">
                    <div class="flex flex-col space-y-6 mb-6">
                        <div class="flex justify-between items-center">
                            <h3 class="text-sm font-black text-white uppercase tracking-widest flex items-center"><i class="fas fa-calendar-alt mr-3 text-purple-400"></i>交易日历</h3>
                            <button id="btn-current-month" class="px-3 py-1.5 text-[10px] bg-white/5 rounded-lg text-gray-400 hover:bg-purple-500 hover:text-black font-black transition-all">当前月</button>
                        </div>
                        <div class="flex space-x-3">
                            <input type="month" id="calendar-month-select" class="flex-grow bg-[#05050a] border border-[#2d2d4c] text-purple-400 text-xs px-4 py-3 rounded-xl outline-none font-black font-mono">
                            <button onclick="window.changeMonth(-1)" class="w-10 h-10 bg-white/5 rounded-xl hover:text-purple-400 transition-colors"><i class="fas fa-chevron-left"></i></button>
                            <button onclick="window.changeMonth(1)" class="w-10 h-10 bg-white/5 rounded-xl hover:text-purple-400 transition-colors"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div class="grid grid-cols-7 gap-1 text-[10px] text-gray-600 mb-3 text-center uppercase font-black tracking-widest">
                        <div>一</div><div>二</div><div>三</div><div>四</div><div>五</div><div>六</div><div>日</div>
                    </div>
                    <div id="calendar-heatmap" class="calendar-grid"></div>
                    <div class="mt-8 pt-6 border-t border-white/5 flex justify-between items-center">
                        <div>
                            <p class="text-[10px] text-gray-500 uppercase font-black tracking-widest mb-1">视图盈亏</p>
                            <p id="view-pnl" class="text-xl font-black font-mono">+$0.00</p>
                        </div>
                        <div class="text-center">
                            <p class="text-[10px] text-gray-500 uppercase font-black tracking-widest mb-1">本月收益率</p>
                            <p id="view-roi" class="text-xl font-black font-mono text-white">0.00%</p>
                        </div>
                        <div class="text-right">
                            <p class="text-[10px] text-gray-500 uppercase font-black tracking-widest mb-1">交易次数</p>
                            <p id="view-count" class="text-xl font-black font-mono text-white">0</p>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-8 xl:col-span-9 p-8 rounded-3xl component-bg shadow-2xl relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-64 h-64 bg-purple-500/5 blur-[100px] pointer-events-none"></div>
                    <div class="flex justify-between items-center mb-8">
                        <h3 class="text-sm font-black text-gray-400 uppercase tracking-[0.3em]"><i class="fas fa-wave-square mr-3 text-purple-500"></i>Equity Curve Analytics</h3>
                        <div class="flex bg-black/40 rounded-lg p-1 border border-white/5">
                            <button id="chart-mode-view" class="px-3 py-1 text-[10px] font-black rounded-md text-gray-400 hover:text-white transition-all">VIEW</button>
                            <button id="chart-mode-all" class="px-3 py-1 text-[10px] font-black rounded-md bg-purple-500 text-black shadow-lg shadow-purple-500/20">ALL</button>
                        </div>
                    </div>
                    <div class="h-[380px] w-full"><canvas id="equity-chart"></canvas></div>
                </div>
            </div>

            <!-- 底层：交易日志 -->
            <div class="p-8 rounded-3xl component-bg border border-white/10 shadow-2xl">
                <div class="flex flex-col md:flex-row justify-between items-center mb-10 gap-6">
                    <div class="flex items-center space-x-4">
                        <h3 class="text-2xl font-black text-white uppercase tracking-tighter">交易日志 <span id="log-count" class="ml-3 px-3 py-1 bg-purple-500 text-black text-[11px] rounded-lg font-black font-mono">0</span></h3>
                        <button onclick="window.exportCSV()" class="bg-[#05050a] hover:bg-white/5 border border-white/10 text-white px-4 py-3 rounded-2xl text-xs font-black transition-all flex items-center group">
                            <i class="fas fa-file-csv mr-2 text-green-500 group-hover:scale-110 transition-transform"></i> 导出 CSV
                        </button>
                        <button onclick="window.openModal()" class="bg-purple-500 hover:bg-purple-400 text-black px-6 py-3 rounded-2xl text-sm font-black transition-all shadow-xl shadow-purple-500/30 active:scale-95">
                            <i class="fas fa-plus-circle mr-2"></i> 录入新成交
                        </button>
                    </div>
                    <div class="flex space-x-3 w-full md:w-auto">
                        <div class="relative flex-grow md:flex-initial">
                            <i class="fas fa-search absolute left-4 top-1/2 -translate-y-1/2 text-gray-600"></i>
                            <input type="text" id="search-input" placeholder="筛选代码 (BTC/ETH)..." class="bg-[#05050a]/60 border border-[#2d2d4c] pl-11 pr-4 py-3 rounded-xl text-xs text-white focus:border-purple-500 outline-none w-full md:w-56 font-bold transition-all">
                        </div>
                        <select id="filter-status" class="bg-[#05050a]/60 border border-[#2d2d4c] text-white text-xs px-4 py-3 rounded-xl outline-none font-bold">
                            <option value="all">所有状态</option>
                            <option value="win">盈利单</option>
                            <option value="loss">亏损单</option>
                        </select>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="min-w-full">
                        <thead>
                            <tr class="text-left text-[11px] uppercase text-gray-500 font-black tracking-[0.2em] border-b border-white/5">
                                <th class="px-6 py-6">Timestamp / 成交时间</th>
                                <th class="px-6 py-6">Asset / 品种</th>
                                <th class="px-6 py-6 text-right">PnL / 获利($)</th>
                                <th class="px-6 py-6 text-right">Risk / R值</th>
                                <th class="px-6 py-6 text-center">Bias / 方向</th>
                                <th class="px-6 py-6 text-right">Actions / 操作</th>
                            </tr>
                        </thead>
                        <tbody id="trade-list" class="divide-y divide-white/5 text-sm"></tbody>
                    </table>
                    <div id="empty-state" class="hidden py-24 text-center text-gray-700">
                        <i class="fas fa-terminal text-4xl mb-4 block animate-pulse"></i>
                        <p class="text-xs font-black uppercase tracking-[0.3em]">No Data Packets Found in Current Scope</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Trade Modal -->
    <div id="trade-modal" class="fixed inset-0 hidden flex justify-center items-center p-4 z-50 bg-black/95 backdrop-blur-md">
        <div class="bg-[#111122] border border-[#2d2d4c] p-10 rounded-[2.5rem] w-full max-w-xl shadow-[0_0_100px_-20px_rgba(217,70,239,0.3)] modal-animate">
            <div class="flex justify-between items-center mb-8">
                <div>
                    <h3 class="text-2xl font-black text-white uppercase tracking-tighter">录入成交数据</h3>
                    <p class="text-[10px] text-purple-500 font-black uppercase mt-1 tracking-widest">Transaction Entry Protocol</p>
                </div>
                <button onclick="window.closeModal()" class="w-10 h-10 flex items-center justify-center rounded-xl bg-white/5 text-gray-500 hover:text-white transition-colors"><i class="fas fa-times"></i></button>
            </div>
            <form id="trade-form" class="grid grid-cols-2 gap-6">
                <input type="hidden" id="edit-id">
                
                <div class="col-span-1">
                    <label class="text-[12px] text-white uppercase font-black tracking-widest mb-2 block">交易品种</label>
                    <input id="trade-pair" type="text" placeholder="e.g. BTC/USDT" required class="w-full p-4 bg-[#05050a] text-white rounded-2xl border border-[#3d3d5c] outline-none focus:border-purple-500 transition-all font-bold">
                </div>
                <div class="col-span-1">
                    <label class="text-[12px] text-white uppercase font-black tracking-widest mb-2 block">盈亏金额 ($)</label>
                    <input id="trade-profit" type="number" step="0.01" required class="w-full p-4 bg-[#05050a] text-white rounded-2xl border border-[#3d3d5c] outline-none focus:border-purple-500 transition-all font-bold font-mono">
                </div>
                <div class="col-span-1">
                    <label class="text-[12px] text-white uppercase font-black tracking-widest mb-2 block">交易方向</label>
                    <select id="trade-direction" class="w-full p-4 bg-[#05050a] text-white rounded-2xl border border-[#3d3d5c] outline-none font-black appearance-none">
                        <option value="Long">LONG / 做多</option>
                        <option value="Short">SHORT / 做空</option>
                    </select>
                </div>
                <div class="col-span-1">
                    <label class="text-[12px] text-white uppercase font-black tracking-widest mb-2 block">R 风险值</label>
                    <input id="trade-r" type="number" step="0.1" required class="w-full p-4 bg-[#05050a] text-white rounded-2xl border border-[#3d3d5c] outline-none focus:border-purple-500 transition-all font-bold font-mono">
                </div>
                <div class="col-span-2">
                    <label class="text-[12px] text-white uppercase font-black tracking-widest mb-2 block">TradingView 图表链接 (可选)</label>
                    <div class="relative">
                        <i class="fas fa-link absolute left-4 top-1/2 -translate-y-1/2 text-purple-500/50"></i>
                        <input id="trade-tv-link" type="url" placeholder="https://www.tradingview.com/x/..." class="w-full pl-12 pr-4 p-4 bg-[#05050a] text-white rounded-2xl border border-[#3d3d5c] outline-none focus:border-purple-500 transition-all font-bold">
                    </div>
                </div>
                <div class="col-span-2">
                    <label class="text-[12px] text-white uppercase font-black tracking-widest mb-2 block">成交时间戳</label>
                    <input id="trade-date" type="datetime-local" required class="w-full p-4 bg-[#05050a] text-white rounded-2xl border border-[#3d3d5c] outline-none focus:border-purple-500 transition-all font-bold font-mono">
                </div>
                
                <button type="submit" class="col-span-2 cyber-button py-5 rounded-2xl font-black uppercase text-base mt-4">确认</button>
            </form>
        </div>
    </div>

    <script src="js/market.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>


































































